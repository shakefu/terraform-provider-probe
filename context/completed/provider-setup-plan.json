{
  "plan_name": "Terraform Provider Setup",
  "last_updated": "2026-01-15",
  "session_startup": [
    "Run git status to check branch",
    "Run go test ./... to verify baseline",
    "Read context/current-task.json to find active plan",
    "Find first task where status=pending and blocked_by=null"
  ],
  "tasks": [
    {
      "id": "unit-tests-mapping",
      "name": "Add unit tests for resource type mapping",
      "status": "complete",
      "priority": 1,
      "blocked_by": null,
      "output_file": "internal/provider/resource_types_test.go",
      "steps": [
        "Create resource_types_test.go",
        "Test resolveCloudControlType with known TF types",
        "Test resolveCloudControlType with Cloud Control pass-through",
        "Test resolveCloudControlType with unknown types",
        "Run go test ./internal/provider/... -run TestResolve"
      ],
      "acceptance_criteria": [
        "Tests cover all mapping scenarios",
        "go test ./... passes"
      ]
    },
    {
      "id": "unit-tests-arn",
      "name": "Add unit tests for ARN extraction",
      "status": "complete",
      "priority": 2,
      "blocked_by": null,
      "output_file": "internal/provider/arn_extractor_test.go",
      "steps": [
        "Create arn_extractor_test.go",
        "Test extractArn with various ARN field names",
        "Test extractArn with nil/empty properties",
        "Test extractArn with no ARN present",
        "Run go test ./internal/provider/... -run TestExtract"
      ],
      "acceptance_criteria": [
        "Tests cover all ARN field variations",
        "go test ./... passes"
      ]
    },
    {
      "id": "unit-tests-localstack",
      "name": "Add unit tests for LocalStack detection",
      "status": "complete",
      "priority": 3,
      "blocked_by": null,
      "output_file": "internal/provider/provider_test.go",
      "steps": [
        "Create provider_test.go",
        "Test detectLocalStack function (mock HTTP)",
        "Run go test ./internal/provider/... -run TestDetect"
      ],
      "acceptance_criteria": [
        "LocalStack detection logic is tested",
        "go test ./... passes"
      ]
    },
    {
      "id": "acceptance-tests",
      "name": "Add acceptance tests using terraform-plugin-testing",
      "status": "complete",
      "priority": 4,
      "blocked_by": null,
      "output_file": "internal/provider/probe_data_source_test.go",
      "steps": [
        "Add terraform-plugin-testing dependency",
        "Create probe_data_source_test.go with TestAccProbeDataSource",
        "Test exists=false for nonexistent resource",
        "Test exists=true for existing resource (requires LocalStack or mocking)",
        "Run TF_ACC=1 go test ./... -v"
      ],
      "acceptance_criteria": [
        "Acceptance tests run with TF_ACC=1",
        "Tests verify probe data source behavior"
      ]
    },
    {
      "id": "goreleaser-setup",
      "name": "Set up GoReleaser for releases",
      "status": "complete",
      "priority": 5,
      "blocked_by": "acceptance-tests",
      "output_file": ".goreleaser.yml",
      "steps": [
        "Create .goreleaser.yml following Terraform provider conventions",
        "Configure builds for linux/darwin amd64/arm64",
        "Configure archive naming for Terraform Registry",
        "Add GPG signing configuration placeholder",
        "Test with goreleaser check"
      ],
      "acceptance_criteria": [
        ".goreleaser.yml passes goreleaser check",
        "Build targets match Terraform Registry requirements"
      ]
    },
    {
      "id": "github-actions",
      "name": "Set up GitHub Actions CI/CD",
      "status": "complete",
      "priority": 6,
      "blocked_by": "goreleaser-setup",
      "output_file": ".github/workflows/release.yml",
      "steps": [
        "Create .github/workflows/test.yml for PR testing",
        "Create .github/workflows/release.yml for tag releases",
        "Configure GoReleaser action for releases",
        "Add Terraform Registry publishing step"
      ],
      "acceptance_criteria": [
        "CI runs tests on PRs",
        "Release workflow triggers on version tags"
      ]
    },
    {
      "id": "registry-docs",
      "name": "Prepare Terraform Registry documentation",
      "status": "complete",
      "priority": 7,
      "blocked_by": "github-actions",
      "output_file": "docs/index.md",
      "steps": [
        "Create docs/index.md with provider overview",
        "Verify docs/data-sources/probe.md format",
        "Add terraform-plugin-docs generation if needed",
        "Ensure docs follow Registry format requirements"
      ],
      "acceptance_criteria": [
        "Documentation follows Terraform Registry format",
        "All data sources documented"
      ]
    }
  ],
  "notes": [
    "Unit test tasks (priority 1-3) can run in parallel",
    "Acceptance tests depend on unit tests for confidence",
    "GoReleaser and CI/CD are sequential dependencies",
    "Registry publishing requires GitHub repo to be public"
  ]
}
