{
  "plan_name": "Testing Improvements with Coverage Checks",
  "last_updated": "2026-01-18",
  "session_startup": [
    "Run git status to check branch",
    "Read this file to find current task",
    "Find first task where status=pending and blocked_by=null"
  ],
  "tasks": [
    {
      "id": "add-coverage-threshold",
      "name": "Add coverage threshold enforcement to CI",
      "status": "complete",
      "priority": 1,
      "blocked_by": null,
      "output_file": ".github/workflows/test.yml",
      "steps": [
        "Add step after test to parse coverage.out and check threshold",
        "Use go tool cover -func=coverage.out to get total coverage",
        "Fail CI if coverage drops below threshold (suggest 60% initially)",
        "Consider using a dedicated action like codecov or coveralls"
      ],
      "acceptance_criteria": [
        "CI fails if coverage drops below threshold",
        "Coverage percentage is visible in CI output"
      ]
    },
    {
      "id": "add-coverage-badge",
      "name": "Add coverage badge to README",
      "status": "pending",
      "priority": 2,
      "blocked_by": "add-coverage-threshold",
      "output_file": "README.md",
      "steps": [
        "Choose coverage service (Codecov, Coveralls, or shields.io with gist)",
        "Configure CI to upload coverage to chosen service",
        "Add badge to README.md"
      ],
      "acceptance_criteria": [
        "README shows current coverage percentage",
        "Badge updates automatically on main branch"
      ]
    },
    {
      "id": "add-acceptance-tests-ci",
      "name": "Add acceptance tests with LocalStack to CI",
      "status": "complete",
      "priority": 3,
      "blocked_by": null,
      "output_file": ".github/workflows/test.yml",
      "steps": [
        "Add LocalStack service container to CI workflow",
        "Create separate job for acceptance tests",
        "Set TF_ACC=1 and configure LocalStack endpoint",
        "Run acceptance tests against LocalStack"
      ],
      "acceptance_criteria": [
        "Acceptance tests run in CI with LocalStack",
        "Tests pass against LocalStack S3 and DynamoDB",
        "Clear separation between unit and acceptance test jobs"
      ]
    },
    {
      "id": "review-test-coverage-gaps",
      "name": "Review and address test coverage gaps",
      "status": "pending",
      "priority": 4,
      "blocked_by": "add-coverage-threshold",
      "output_file": null,
      "steps": [
        "Run go test -coverprofile=coverage.out ./...",
        "Run go tool cover -func=coverage.out to identify low-coverage files",
        "Add unit tests for untested code paths",
        "Focus on error handling and edge cases"
      ],
      "acceptance_criteria": [
        "Coverage meets or exceeds threshold",
        "Critical code paths have test coverage",
        "Error handling is tested"
      ]
    }
  ],
  "notes": [
    "Tests cannot run locally in this environment (no network for Go toolchain)",
    "CI uses GitHub Actions with go-version-file from go.mod",
    "Acceptance tests require TF_ACC=1 and real/emulated AWS services",
    "LocalStack provides free S3 and DynamoDB emulation",
    "Consider keeping coverage threshold modest initially - provider code often has lower coverage due to acceptance test complexity"
  ]
}
